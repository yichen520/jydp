<?xml version="1.0" encoding="utf-8" ?>
        <!DOCTYPE mapper PUBLIC
                "-//mybatis.org//DTD Mapper 3.0//EN"
                "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.jydp.dao.impl.otc.OtcTransactionUserDealDaoImpl">

    <insert id="OtcTransactionUserDeal_insertOtcTransactionUserDeal" parameterType="OtcTransactionUserDealDO">
        INSERT INTO otc_transaction_user_deal_tab(otcOrderNo, otcPendingOrderNo, userId, userAccount, paymentType,
        currencyId, currencyName, pendingRatio, currencyNumber, currencyTotalPrice, pendTime, dealStatus, addTime)
        VALUES
        (#{otcOrderNo}, #{otcPendingOrderNo}, #{userId}, #{userAccount}, #{paymentType}, #{currencyId}, #{currencyName}, #{pendingRatio},
        #{currencyNumber}, #{currencyTotalPrice}, #{pendTime}, #{dealStatus}, #{addTime})
    </insert>

    <select id="OtcTransactionUserDeal_getOtcTransactionUsealByOrderNo" parameterType="java.lang.String" resultType="OtcTransactionUserDealDO">
		SELECT otcOrderNo,otcPendingOrderNo,userId,userAccount,paymentType,currencyId,
            currencyName,transactionPrice,pendingRatio,currencyNumber,feeNumber,currencyTotalPrice,
            pendTime,dealStatus,remark,updateTime,addTime
        FROM otc_transaction_user_deal_tab
        WHERE otcOrderNo = #{orderNo}
    </select>

    <update id="OtcTransactionUserDeal_updateDealStatusByOtcOrderNo" parameterType="java.util.Map">
        UPDATE otc_transaction_user_deal_tab
        SET dealStatus = #{changedStatus},
            updateTime = #{updateTime}
        WHERE otcOrderNo = #{otcOrderNo}
        AND dealStatus = #{dealStatus}
    </update>
</mapper>