<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC
		"-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.jydp.dao.impl.otc.otcTransactionPendOrderDaoImpl">

	<insert id="OtcTransactionPendOrde_insertOtcTransactionPendOrder" parameterType="OtcTransactionPendOrderDO">
		INSERT INTO otc_transaction_pend_order_tab
		(otcPendingOrderNo, userId, userAccount, orderType, currencyId, currencyName, pendingRatio, minNumber,
		 maxNumber, addTime)
		VALUES
		(#{otcPendingOrderNo}, #{userId}, #{userAccount}, #{orderType}, #{currencyId}, #{currencyName}, #{pendingRatio},
		 #{minNumber}, #{maxNumber}, #{addTime})
	</insert>

	<select id="OtcTransactionPendOrde_getOtcTransactionPendOrderByOrderNo" parameterType="java.lang.String" resultType="OtcTransactionPendOrderDO">
		SELECT otcPendingOrderNo,userId,userAccount,orderType,currencyId,currencyName,pendingRatio,
			minNumber,maxNumber,pendingNumber,dealNumber,buyFee,restBalanceLock,area,pendingStatus,endTime,
			remark,updateTime,addTime
		FROM otc_transaction_pend_order_tab
		WHERE otcPendingOrderNo = #{orderNo}
	</select>

	<select id="OtcTransactionPendOrde_countOtcTransactionPendOrder" parameterType="java.util.Map" resultType="int">
		SELECT  COUNT(otcPendingOrderNo)
		FROM otc_transaction_pend_order_tab
		WHERE
			pendingStatus = 1
		<if test="currencyId != 0">
			AND currencyId = #{currencyId}
		</if>
		<if test="orderType != 0 ">
			AND orderType = #{orderType}
		</if>
		<if test="area != null and area != ''">
			AND area = #{area}
		</if>
	</select>

	<select id="OtcTransactionPendOrde_getOtcTransactionPendOrderlist" parameterType="java.util.Map" resultType="OtcTransactionPendOrderDO">
		SELECT otcPendingOrderNo,userId,userAccount,orderType,currencyId,currencyName,pendingRatio,
			minNumber,maxNumber,pendingNumber,dealNumber,buyFee,restBalanceLock,area,pendingStatus,endTime,
			remark,updateTime,addTime
		FROM otc_transaction_pend_order_tab
		WHERE
				pendingStatus = 1
			<if test="currencyId != 0">
				AND currencyId = #{currencyId}
			</if>
			<if test="orderType != 0 ">
				AND orderType = #{orderType}
			</if>
			<if test="area != null and area != ''">
				AND area = #{area}
			</if>
		ORDER BY addTime DESC
		LIMIT #{startNumber}, #{pageSize}
	</select>
</mapper>